<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <style type="text/css">

        html {
            width: 100%;
            display: flex;
            justify-content: center;
            padding-top: 20px;
            padding-bottom: 20px;
        }

        input{
            text-align: left;
            border: 1px solid black;
            border-radius: 3px;
            line-height: 35px;
            font-size: 12px;
            padding-left: 10px;
            padding-right: 10px;
        }
        textarea {
            width: 100%;
            height: 6.25em;
            resize: none;
        }
        .wrapper{
            width: 800px;
            padding: 20px;
            margin-left: auto;
            border: 1px solid #228b22;
            text-align: left;
            margin-right: auto;
            margin-bottom: 10px;
        }

        div {
            padding-top: 3px;
            padding-bottom: 8px;
        }

        .title {
            text-align: center;
            font-weight: 700;
        }

        label{
            text-align: left;
        }


    </style>


    <script src="http://code.jquery.com/jquery-latest.min.js"></script>
    <script type="text/javascript">
    $(document).ready(function() {
            $('input[type="checkbox"]').click(function (){
                if($("#kakaoYn").is(":checked")){
                    $("#kakaoYn").val("Y");
                }
                if($("#term1").is(":checked")){
                    $("#term1").val("Y");
                }
                if($("#term2").is(":checked")){
                    $("#term2").val("Y");
                }
            })
    });

    $(document).ready(function() {
        var isIdChecked = false;    //중복체크했을 땐 true로 변경
        var isNickChecked = false;    //중복체크했을 땐 true로 변경

        $("input[name='userId']").on("change", function(e){
            isIdChecked = false;    //userId값이 변경될 때마다 중복체크버튼값 리셋
        });

        $("input[name='nickName']").on("change", function(e){
            isNickChecked = false;    //nickName값이 변경될 때마다 중복체크버튼값 리셋
        });
    });



    $(function() {   //1

        $("#idCheckBtn").on("click", function (e) { //2

            e.preventDefault(); //form 태그안의 버튼이라 그냥 submit 되는거 방지

            $.ajax({    //3
                url: '/member/checkId.do',
                type:'post',
                data: {"userId" : $("input[name='userId']").val()},
                success: function (data) {
                    // 성공 시 실패 메시지 hide, 성공 메시지 show
                    if(data=="사용가능") {
                        isIdChecked=true;
                        $('#idNotAvailable').hide();
                        $('#idAvailable').show().text(data).append($('<br />'));
                    }
                    // 실패 시 실패 메시지 show, 성공 메시지 hide
                    else{
                        $('#idAvailable').hide();
                        $('#idNotAvailable').show().text('이미 사용중인 아이디 입니다.').append($('<br />'));
                    }

                }, error: function (req,status,err) {
                    console.log(req);

                }
            })
        })


        $(function() {   //1

            $("#nickCheckBtn").on("click", function (e) { //2

                e.preventDefault(); //form 태그안의 버튼이라 그냥 submit 되는거 방지

                $.ajax({    //3
                    url: '/member/checkNick.do',
                    type: 'post',
                    data: {"nickName": $("input[name='nickName']").val()},
                    success: function (data) {
                        // 성공 시 실패 메시지 hide, 성공 메시지 show
                        if (data == "사용가능") {
                            isNickChecked = true;
                            $('#nickNotAvailable').hide();
                            $('#nickAvailable').show().text(data).append($('<br />'));
                        }
                        // 실패 시 실패 메시지 show, 성공 메시지 hide
                        else {
                            $('#nickAvailable').hide();
                            $('#nickNotAvailable').show().text('이미 사용중인 닉네임 입니다.').append($('<br />'));
                        }

                    }, error: function (req, status, err) {
                        console.log(req);

                    }
                })
            })
        })
    });


    </script>
    <title>회원가입</title>
</head>
<body>
<div class="wrapper">
    <div class="title"><h3 style="font-size:25px;">회원가입</h3></div>

    <div class="container">
        <form role = "form" th:action="@{/member/join.do}" th:object="${member}" method="post">
            <!--회원가입시 카카오 로그인 여부는 N으로 설정-->
            <input type="hidden" id="kakaoYn" name="kakaoYn" value="N">
            <div class="form-group">
                <div class="userid">
                    <label for="userId">아이디</label>
                    <input type="text" id="userId" name="userId" placeholder="아이디를 입력하세요">
                    <d id="idAvailable" class="valid-feedback" style="display: none;"></d>
                    <d id="idNotAvailable" class="invalid-feedback" style="display: none;"></d>
                    <button id="idCheckBtn">중복확인</button>
                </div>
                <div class="password">
                    <label for="userPw">비밀번호</label>
                    <input type="password" id="userPw" name="userPw" placeholder="비밀번호를 입력하세요">
                </div>
                <div class="username">
                    <label for="userName">이름</label>
                    <input type="text" id="userName" name="userName" placeholder="이름을 입력하세요">
                </div>
                <div class="nickname">
                    <label for="nickName">닉네임</label>
                    <input type="text" id="nickName" name="nickName" placeholder="닉네임을 입력하세요">
                    <d id="nickAvailable" class="valid-feedback" style="display: none;"></d>
                    <d id="nickNotAvailable" class="invalid-feedback" style="display: none;"></d>
                <button id="nickCheckBtn">중복확인</button>
                </div>
                <div class="phonenum">
                    <label for="phoneNum">휴대폰번호</label>
                    <input type="text" id="phoneNum" name="phoneNum" placeholder="휴대폰번호를 입력하세요">
                </div>
                <fieldset class="form-group">
                    <legend class="form-text">필수약관</legend>

                <div class="form-check term1">
                    <textarea class="form-textarea" rows="12">
 약관동의-MooD 서비스 및 제품(이하 ‘서비스’)을 이용해 주셔서 감사합니다. 본 약관은 다양한 MooD 서비스의 이용과 관련하여 MooD 서비스를 제공하는 MooD
 주식회사(이하 ‘MooD’)와 이를 이용하는 MooD 서비스 회원(이하 ‘회원’) 또는 비회원과의 관계를 설명하며, 아울러 여러분의 MooD 서비스 이용에 도움이 될 수 있는 유익한 정보를 포함하고 있습니다.
제 1장 총칙

제 1 조(목적)

본 약관은 국가공간정보포털 웹사이트(이하 "국가공간정보포털")가 제공하는 모든 서비스(이하 "서비스")의 이용조건 및 절차, 회원과 국가공간정보포털의 권리, 의무, 책임사항과 기타 필요한 사항을 규정함을 목적으로 합니다.

제 2 조(약관의 효력과 변경)

1. 국가공간정보포털은 이용자가 본 약관 내용에 동의하는 경우, 국가공간정보포털의 서비스 제공 행위 및 회원의 서비스 사용 행위에 본 약관이 우선적으로 적용됩니다.
2. 국가공간정보포털은 약관을 개정할 경우, 적용일자 및 개정사유를 명시하여 현행약관과 함께 국가공간정보포털의 초기화면에 그 적용일 7일 이전부터 적용 전일까지 공지합니다. 단, 회원에 불리하게 약관내용을 변경하는 경우에는 최소한 30일 이상의 사전 유예기간을 두고 공지합니다. 이 경우 국가공간정보포털은 개정 전 내용과 개정 후 내용을 명확하게 비교하여 회원이 알기 쉽도록 표시합니다.
3. 변경된 약관은 국가공간정보포털 홈페이지에 공지하거나 e-mail을 통해 회원에게 공지하며, 약관의 부칙에 명시된 날부터 그 효력이 발생됩니다. 회원이 변경된 약관에 동의하지 않는 경우, 회원은 본인의 회원등록을 취소(회원탈퇴)할 수 있으며, 변경된 약관의 효력 발생일로부터 7일 이내에 거부의사를 표시하지 아니하고 서비스를 계속 사용할 경우는 약관 변경에 대한 동의로 간주됩니다.

제 3 조(약관 외 준칙)

본 약관에 명시되지 않은 사항은 전기통신기본법, 전기통신사업법, 정보통신윤리위원회심의규정, 정보통신 윤리강령, 프로그램보호법 및 기타 관련 법령의 규정에 의합니다.

제 4 조(용어의 정의)

본 약관에서 사용하는 용어의 정의는 다음과 같습니다.
1. 이용자 : 본 약관에 따라 국가공간정보포털이 제공하는 서비스를 받는 자
2. 가입 : 국가공간정보포털이 제공하는 신청서 양식에 해당 정보를 기입하고, 본 약관에 동의하여 서비스 이용계약을 완료시키는 행위
3. 회원 : 국가공간정보포털에 개인 정보를 제공하여 회원 등록을 한 자로서 국가공간정보포털이 제공하는 서비스를 이용할 수 있는 자.
4. 계정(ID) : 회원의 식별과 회원의 서비스 이용을 위하여 회원이 선정하고 국가공간정보포털에서 부여하는 문자와 숫자의 조합
5. 비밀번호 : 회원과 계정이 일치하는지를 확인하고 통신상의 자신의 비밀보호를 위하여 회원 자신이 선정한 문자와 숫자의 조합
6. 탈퇴 : 회원이 이용계약을 종료시키는 행위
7. 본 약관에서 정의하지 않은 용어는 개별서비스에 대한 별도 약관 및 이용규정에서 정의합니다.
                    </textarea>
                    <br>
                    <label for="term1">필수 동의1</label>
                    <input class="form-check-input" type="checkbox" id="term1" name="term1" value="N">
                </div>
                    <br>
                <div class="form-check term2">
                    <textarea class="form-textarea" rows="12">
                              개인 정보 수집 및 이용 동의
                              -개인정보보호법에 따라 MooD에 회원가입 신청하시는 분께 수집하는 개인정보의 항목, 개인정보의 수집 및 이용목적,
                    개인정보의 보유 및 이용기간, 동의 거부권 및 동의 거부 시 불이익에 관한  사항을 안내 드리오니 자세히 읽은 후 동의하여 주시기 바랍니다.
                    제15조(개인정보의 수집ㆍ이용)

① 개인정보처리자는 다음 각 호의 어느 하나에 해당하는 경우에는 개인정보를 수집할 수 있으며 그 수집 목적의 범위에서 이용할 수 있다.

1. 정보주체의 동의를 받은 경우

2. 법률에 특별한 규정이 있거나 법령상 의무를 준수하기 위하여 불가피한 경우

3. 공공기관이 법령 등에서 정하는 소관 업무의 수행을 위하여 불가피한 경우

4. 정보주체와의 계약의 체결 및 이행을 위하여 불가피하게 필요한 경우

5. 정보주체 또는 그 법정대리인이 의사표시를 할 수 없는 상태에 있거나 주소불명 등으로 사전 동의를 받을 수 없는 경우로서 명백히 정보주체 또는 제3자의 급박한 생명, 신체, 재산의 이익을 위하여 필요하다고 인정되는 경우

6. 개인정보처리자의 정당한 이익을 달성하기 위하여 필요한 경우로서 명백하게 정보주체의 권리보다 우선하는 경우. 이 경우 개인정보처리자의 정당한 이익과 상당한 관련이 있고 합리적인 범위를 초과하지 아니하는 경우에 한한다.



② 개인정보처리자는 제1항제1호에 따른 동의를 받을 때에는 다음 각 호의 사항을 정보주체에게 알려야 한다. 다음 각 호의 어느 하나의 사항을 변경하는 경우에도 이를 알리고 동의를 받아야 한다.

1. 개인정보의 수집·이용 목적

2. 수집하려는 개인정보의 항목

3. 개인정보의 보유 및 이용 기간

4. 동의를 거부할 권리가 있다는 사실 및 동의 거부에 따른 불이익이 있는 경우에는 그 불이익의 내용</textarea>
                    <br>
                    <label for="term2">필수 동의2</label>
                    <input class="form-check-input" type="checkbox" id="term2" name="term2" value="N">
                </div>

                </fieldset>
            <div class="signup">
                <button type="submit">등록</button>
            </div>
            </div>

        </form>

    </div> <!-- /container -->
</div>
</body>
</html>